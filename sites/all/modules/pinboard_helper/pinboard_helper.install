<?php

/**
 * @file
 * Installation file for the pinboard helper module
 */

/**
 * Implements hook_install().
 */
function pinboard_helper_install() {
  //db_query("UPDATE {system} SET weight = 5 WHERE name = 'pinboard_helper'");
}

/**
 * Implements hook_uninstall().
 */
function pinboard_helper_uninstall() {
/*
  foreach (node_type_get_names('names') as $type => $type_name) {
    variable_del('ant_' . $type);
    variable_del('ant_pattern_' . $type);
    variable_del('ant_php_' . $type);
  }
*/
}

/**
 * Update 1
 */
function pinboard_helper_update_1() {
  db_query("UPDATE {field_config} SET data = 0x613a373a7b733a31323a227472616e736c617461626c65223b733a313a2230223b733a31323a22656e746974795f7479706573223b613a303a7b7d733a383a2273657474696e6773223b613a313a7b733a31303a226d61785f6c656e677468223b733a343a2231303234223b7d733a373a2273746f72616765223b613a353a7b733a343a2274797065223b733a31373a226669656c645f73716c5f73746f72616765223b733a383a2273657474696e6773223b613a303a7b7d733a363a226d6f64756c65223b733a31373a226669656c645f73716c5f73746f72616765223b733a363a22616374697665223b733a313a2231223b733a373a2264657461696c73223b613a313a7b733a333a2273716c223b613a323a7b733a31383a224649454c445f4c4f41445f43555252454e54223b613a313a7b733a32303a226669656c645f646174615f6669656c645f75726c223b613a323a7b733a353a2276616c7565223b733a31353a226669656c645f75726c5f76616c7565223b733a363a22666f726d6174223b733a31363a226669656c645f75726c5f666f726d6174223b7d7d733a31393a224649454c445f4c4f41445f5245564953494f4e223b613a313a7b733a32343a226669656c645f7265766973696f6e5f6669656c645f75726c223b613a323a7b733a353a2276616c7565223b733a31353a226669656c645f75726c5f76616c7565223b733a363a22666f726d6174223b733a31363a226669656c645f75726c5f666f726d6174223b7d7d7d7d7d733a31323a22666f726569676e206b657973223b613a313a7b733a363a22666f726d6174223b613a323a7b733a353a227461626c65223b733a31333a2266696c7465725f666f726d6174223b733a373a22636f6c756d6e73223b613a313a7b733a363a22666f726d6174223b733a363a22666f726d6174223b7d7d7d733a373a22696e6465786573223b613a313a7b733a363a22666f726d6174223b613a313a7b693a303b733a363a22666f726d6174223b7d7d733a323a226964223b733a323a223132223b7d WHERE id = 5;");
  db_query("UPDATE {field_config_instance} SET data = 0x613a373a7b733a353a226c6162656c223b733a333a2255524c223b733a363a22776964676574223b613a353a7b733a363a22776569676874223b733a313a2235223b733a343a2274797065223b733a31343a22746578745f746578746669656c64223b733a363a226d6f64756c65223b733a343a2274657874223b733a363a22616374697665223b693a313b733a383a2273657474696e6773223b613a313a7b733a343a2273697a65223b733a323a223630223b7d7d733a383a2273657474696e6773223b613a323a7b733a31353a22746578745f70726f63657373696e67223b733a313a2230223b733a31383a22757365725f72656769737465725f666f726d223b623a303b7d733a373a22646973706c6179223b613a323a7b733a373a2264656661756c74223b613a353a7b733a353a226c6162656c223b733a363a2268696464656e223b733a343a2274797065223b733a31323a22746578745f64656661756c74223b733a363a22776569676874223b733a313a2237223b733a383a2273657474696e6773223b613a303a7b7d733a363a226d6f64756c65223b733a343a2274657874223b7d733a363a22746561736572223b613a353a7b733a353a226c6162656c223b733a363a2268696464656e223b733a343a2274797065223b733a31323a22746578745f64656661756c74223b733a363a22776569676874223b733a313a2230223b733a383a2273657474696e6773223b613a303a7b7d733a363a226d6f64756c65223b733a343a2274657874223b7d7d733a383a227265717569726564223b693a303b733a31313a226465736372697074696f6e223b733a303a22223b733a31333a2264656661756c745f76616c7565223b4e3b7d WHERE id = 9;");
  db_query("ALTER TABLE {field_data_field_url} CHANGE field_url_value field_url_value VARCHAR( 1024 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL");
  db_query("ALTER TABLE {field_revision_field_url} CHANGE field_url_value field_url_value VARCHAR( 1024 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL");
}


/**
 * Update 2
 */
function pinboard_helper_update_2() {
  db_query("CREATE TABLE {pinboard_accessboard} ( `id` int(11) NOT NULL AUTO_INCREMENT, `uid` int(11) NOT NULL, `bid` int(11) NOT NULL, `data` longtext NOT NULL, PRIMARY KEY (`id`), KEY `uid` (`uid`), KEY `bid` (`bid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;");
}


/**
 * Update 3
 */
function pinboard_helper_update_3() {
  variable_set('pathauto_pinboard_helper_board_pattern', 'board/[board:username]/[board:name]/[board:bid]');
}

